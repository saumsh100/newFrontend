function a () {
  alert('{{{ accountId }}}')
}

// window.SERVICES = {{{ services }}};
window.addEventListener('message', function(e) {
    var modal = document.getElementById('modal');
    var cross = document.getElementById('cross');
    var wrapper = document.getElementById('iframeWrapper');
    cross.style.visibility = 'hidden';
    modal.style.visibility = 'hidden';
    wrapper.style.visibility = 'hidden';
})
window.addEventListener('load', function() {
  // a();
    var div = document.createElement('div');
    div.setAttribute('id', 'bookOnline');
    div.style.position = 'fixed';
    div.style.top = '250px';
    div.style.right = '0px';
    div.style.width = '6rem';
    div.style.height = '5rem';
    div.style.border = 'none';
    div.style.cursor = 'pointer';
    div.style.fontSize = '1em';
    div.style.display = 'flex';
    div.style.alignItems = 'center';
    div.style.backgroundColor = '#0275d8';
    div.style.textAlign = 'center';
    div.style.textTransform = 'uppercase';
    div.style.padding = '10px';
    div.style.color = '#fff';

    document.querySelector('style').textContent += "@media screen and (max-width : 610px) { #bookOnline {font-size:1em!important;position:fixed!important;bottom:0!important;top:auto!important;right:0!important;left:0!important;width:100%!important;height:3em!important;text-align:!important;border-radius:0!important; justify-content: center !important;}}";
     var text = document.createTextNode('Book online');

  div.addEventListener('click', function() {
    var modal = document.getElementById('modal');
    var cross = document.getElementById('cross');
    var wrapper = document.getElementById('iframeWrapper');
    cross.style.visibility = 'visible';
    modal.style.visibility = 'visible';
    wrapper.style.visibility = 'visible';
  });

  div.appendChild(text);

  var modal = document.createElement('iframe');
    modal.setAttribute('id', 'modal');
    div.style.position = 'absolute';
    modal.src = 'http://my.carecru.dev:5000/{{{accountId}}}';
    modal.style.zIndex = '999999999';
    modal.style.position = 'fixed'
    modal.style.width = '100%';
    modal.style.height = '610px';
    modal.style.border = 'none';
    modal.style.borderRadius = '5px';
    modal.style.top = '50%';
    modal.style.left = '50%';
    modal.style.overflow = 'hidden';
    modal.setAttribute('scrolling', 'yes');
    modal.style.transform = 'translateY(-50%) translateX(-50%)';
    // modal.style.transition = 'translateX(-50%)';
    modal.style.visibility = 'hidden';
    // modal.style.marginTop = '50px';
    document.querySelector('style').textContent += "@media screen and (max-height : 610px) { #modal {height: 90% !important}}";

  var cross = document.createElement('div');
    cross.setAttribute('id', 'cross');
    cross.innerHTML = '&times;';
    cross.style.fontSize = '60px';
    cross.style.position = 'fixed';
    cross.style.top = '2%';
    cross.style.right = '1%';
    cross.style.visibility = 'hidden';
    cross.style.cursor = 'pointer';
    cross.style.zIndex = '10';
    cross.style.color = 'white';
    cross.style.lineHeight = '1rem';
    document.querySelector('style').textContent += "@media screen and (max-width : 800px) { #cross {display: none !important}}";


  cross.addEventListener('click', function() {
    var modal = document.getElementById('modal');
    var cross = document.getElementById('cross');
    var wrapper = document.getElementById('iframeWrapper');
    cross.style.visibility = 'hidden';
    modal.style.visibility = 'hidden';
    wrapper.style.visibility = 'hidden';
  })

  var wrapper = document.createElement('div');
    wrapper.setAttribute('id', 'iframeWrapper');
    wrapper.style.position = 'fixed';
    wrapper.style.width = '100%';
    wrapper.style.height = '100%';
    wrapper.style.top = '50%';
    wrapper.style.visibility = 'hidden';
    wrapper.style.left = '50%';
    wrapper.style.background = 'rgba(0,0,0,0.8)';
    wrapper.style.transform = 'translateY(-50%) translateX(-50%)';

  // document.getElementById('iframeWrapper')//.appendChild(modal)
  document.getElementsByTagName('body')[0].appendChild(cross);
  document.getElementsByTagName('body')[0].appendChild(div);
  document.getElementsByTagName('body')[0].appendChild(wrapper).appendChild(modal);
  // document.getElementsByTagName('body')[0].appendChild(modal);
});
